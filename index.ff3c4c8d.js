let t;function e(t){return t&&t.__esModule?t.default:t}var i,r,s=globalThis;function n(t,e,i,r){var s,n=arguments.length,o=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(n<3?s(o):n>3?s(e,i,o):s(e,i))||o);return n>3&&o&&Object.defineProperty(e,i,o),o}"function"==typeof SuppressedError&&SuppressedError;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const o=globalThis,a=o.ShadowRoot&&(void 0===o.ShadyCSS||o.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,h=Symbol(),l=new WeakMap;class u{constructor(t,e,i){if(this._$cssResult$=!0,i!==h)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o,e=this.t;if(a&&void 0===t){let i=void 0!==e&&1===e.length;i&&(t=l.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&l.set(e,t))}return t}toString(){return this.cssText}}const d=t=>new u("string"==typeof t?t:t+"",void 0,h),c=(t,...e)=>new u(1===t.length?t[0]:e.reduce((e,i,r)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[r+1],t[0]),t,h),f=(t,e)=>{if(a)t.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(let i of e){let e=document.createElement("style"),r=o.litNonce;void 0!==r&&e.setAttribute("nonce",r),e.textContent=i.cssText,t.appendChild(e)}},g=a?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(let i of t.cssRules)e+=i.cssText;return d(e)})(t):t,{is:p,defineProperty:v,getOwnPropertyDescriptor:m,getOwnPropertyNames:E,getOwnPropertySymbols:_,getPrototypeOf:y}=Object,T=globalThis,A=T.trustedTypes,b=A?A.emptyScript:"",R=T.reactiveElementPolyfillSupport,x=(t,e)=>t,S={toAttribute(t,e){switch(e){case Boolean:t=t?b:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},w=(t,e)=>!p(t,e),$={attribute:!0,type:String,converter:S,reflect:!1,hasChanged:w};Symbol.metadata??=Symbol("metadata"),T.litPropertyMetadata??=new WeakMap;class U extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=$){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){let i=Symbol(),r=this.getPropertyDescriptor(t,i,e);void 0!==r&&v(this.prototype,t,r)}}static getPropertyDescriptor(t,e,i){let{get:r,set:s}=m(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get(){return r?.call(this)},set(e){let n=r?.call(this);s.call(this,e),this.requestUpdate(t,n,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??$}static _$Ei(){if(this.hasOwnProperty(x("elementProperties")))return;let t=y(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(x("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(x("properties"))){let t=this.properties;for(let e of[...E(t),..._(t)])this.createProperty(e,t[e])}let t=this[Symbol.metadata];if(null!==t){let e=litPropertyMetadata.get(t);if(void 0!==e)for(let[t,i]of e)this.elementProperties.set(t,i)}for(let[t,e]of(this._$Eh=new Map,this.elementProperties)){let i=this._$Eu(t,e);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){let e=[];if(Array.isArray(t))for(let i of new Set(t.flat(1/0).reverse()))e.unshift(g(i));else void 0!==t&&e.push(g(t));return e}static _$Eu(t,e){let i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){let t=new Map;for(let e of this.constructor.elementProperties.keys())this.hasOwnProperty(e)&&(t.set(e,this[e]),delete this[e]);t.size>0&&(this._$Ep=t)}createRenderRoot(){let t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return f(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EC(t,e){let i=this.constructor.elementProperties.get(t),r=this.constructor._$Eu(t,i);if(void 0!==r&&!0===i.reflect){let s=(void 0!==i.converter?.toAttribute?i.converter:S).toAttribute(e,i.type);this._$Em=t,null==s?this.removeAttribute(r):this.setAttribute(r,s),this._$Em=null}}_$AK(t,e){let i=this.constructor,r=i._$Eh.get(t);if(void 0!==r&&this._$Em!==r){let t=i.getPropertyOptions(r),s="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:S;this._$Em=r,this[r]=s.fromAttribute(e,t.type),this._$Em=null}}requestUpdate(t,e,i){if(void 0!==t){if(!((i??=this.constructor.getPropertyOptions(t)).hasChanged??w)(this[t],e))return;this.P(t,e,i)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,e,i){this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}let t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}let t=this.constructor.elementProperties;if(t.size>0)for(let[e,i]of t)!0!==i.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],i)}let t=!1,e=this._$AL;try{(t=this.shouldUpdate(e))?(this.willUpdate(e),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(e)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach(t=>this._$EC(t,this[t])),this._$EU()}updated(t){}firstUpdated(t){}}U.elementStyles=[],U.shadowRootOptions={mode:"open"},U[x("elementProperties")]=new Map,U[x("finalized")]=new Map,R?.({ReactiveElement:U}),(T.reactiveElementVersions??=[]).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const P=globalThis,C=P.trustedTypes,L=C?C.createPolicy("lit-html",{createHTML:t=>t}):void 0,M="$lit$",D=`lit$${Math.random().toFixed(9).slice(2)}$`,X="?"+D,F=`<${X}>`,I=document,N=()=>I.createComment(""),O=t=>null===t||"object"!=typeof t&&"function"!=typeof t,H=Array.isArray,k=t=>H(t)||"function"==typeof t?.[Symbol.iterator],B="[ 	\n\f\r]",j=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,G=/-->/g,W=/>/g,q=RegExp(`>|${B}(?:([^\\s"'>=/]+)(${B}*=${B}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),z=/'/g,V=/"/g,Y=/^(?:script|style|textarea|title)$/i,K=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),Q=K(1),J=(K(2),Symbol.for("lit-noChange")),Z=Symbol.for("lit-nothing"),tt=new WeakMap,te=I.createTreeWalker(I,129);function ti(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==L?L.createHTML(e):e}const tr=(t,e)=>{let i=t.length-1,r=[],s,n=2===e?"<svg>":"",o=j;for(let e=0;e<i;e++){let i=t[e],a,h,l=-1,u=0;for(;u<i.length&&(o.lastIndex=u,null!==(h=o.exec(i)));)u=o.lastIndex,o===j?"!--"===h[1]?o=G:void 0!==h[1]?o=W:void 0!==h[2]?(Y.test(h[2])&&(s=RegExp("</"+h[2],"g")),o=q):void 0!==h[3]&&(o=q):o===q?">"===h[0]?(o=s??j,l=-1):void 0===h[1]?l=-2:(l=o.lastIndex-h[2].length,a=h[1],o=void 0===h[3]?q:'"'===h[3]?V:z):o===V||o===z?o=q:o===G||o===W?o=j:(o=q,s=void 0);let d=o===q&&t[e+1].startsWith("/>")?" ":"";n+=o===j?i+F:l>=0?(r.push(a),i.slice(0,l)+M+i.slice(l)+D+d):i+D+(-2===l?e:d)}return[ti(t,n+(t[i]||"<?>")+(2===e?"</svg>":"")),r]};class ts{constructor({strings:t,_$litType$:e},i){let r;this.parts=[];let s=0,n=0,o=t.length-1,a=this.parts,[h,l]=tr(t,e);if(this.el=ts.createElement(h,i),te.currentNode=this.el.content,2===e){let t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=te.nextNode())&&a.length<o;){if(1===r.nodeType){if(r.hasAttributes())for(let t of r.getAttributeNames())if(t.endsWith(M)){let e=l[n++],i=r.getAttribute(t).split(D),o=/([.?@])?(.*)/.exec(e);a.push({type:1,index:s,name:o[2],strings:i,ctor:"."===o[1]?tl:"?"===o[1]?tu:"@"===o[1]?td:th}),r.removeAttribute(t)}else t.startsWith(D)&&(a.push({type:6,index:s}),r.removeAttribute(t));if(Y.test(r.tagName)){let t=r.textContent.split(D),e=t.length-1;if(e>0){r.textContent=C?C.emptyScript:"";for(let i=0;i<e;i++)r.append(t[i],N()),te.nextNode(),a.push({type:2,index:++s});r.append(t[e],N())}}}else if(8===r.nodeType){if(r.data===X)a.push({type:2,index:s});else{let t=-1;for(;-1!==(t=r.data.indexOf(D,t+1));)a.push({type:7,index:s}),t+=D.length-1}}s++}}static createElement(t,e){let i=I.createElement("template");return i.innerHTML=t,i}}function tn(t,e,i=t,r){if(e===J)return e;let s=void 0!==r?i._$Co?.[r]:i._$Cl,n=O(e)?void 0:e._$litDirective$;return s?.constructor!==n&&(s?._$AO?.(!1),void 0===n?s=void 0:(s=new n(t))._$AT(t,i,r),void 0!==r?(i._$Co??=[])[r]=s:i._$Cl=s),void 0!==s&&(e=tn(t,s._$AS(t,e.values),s,r)),e}class to{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){let{el:{content:e},parts:i}=this._$AD,r=(t?.creationScope??I).importNode(e,!0);te.currentNode=r;let s=te.nextNode(),n=0,o=0,a=i[0];for(;void 0!==a;){if(n===a.index){let e;2===a.type?e=new ta(s,s.nextSibling,this,t):1===a.type?e=new a.ctor(s,a.name,a.strings,this,t):6===a.type&&(e=new tc(s,this,t)),this._$AV.push(e),a=i[++o]}n!==a?.index&&(s=te.nextNode(),n++)}return te.currentNode=I,r}p(t){let e=0;for(let i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class ta{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,i,r){this.type=2,this._$AH=Z,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode,e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){O(t=tn(this,t,e))?t===Z||null==t||""===t?(this._$AH!==Z&&this._$AR(),this._$AH=Z):t!==this._$AH&&t!==J&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):k(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==Z&&O(this._$AH)?this._$AA.nextSibling.data=t:this.T(I.createTextNode(t)),this._$AH=t}$(t){let{values:e,_$litType$:i}=t,r="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=ts.createElement(ti(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===r)this._$AH.p(e);else{let t=new to(r,this),i=t.u(this.options);t.p(e),this.T(i),this._$AH=t}}_$AC(t){let e=tt.get(t.strings);return void 0===e&&tt.set(t.strings,e=new ts(t)),e}k(t){H(this._$AH)||(this._$AH=[],this._$AR());let e=this._$AH,i,r=0;for(let s of t)r===e.length?e.push(i=new ta(this.S(N()),this.S(N()),this,this.options)):i=e[r],i._$AI(s),r++;r<e.length&&(this._$AR(i&&i._$AB.nextSibling,r),e.length=r)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){let e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class th{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,r,s){this.type=1,this._$AH=Z,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=s,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Z}_$AI(t,e=this,i,r){let s=this.strings,n=!1;if(void 0===s)(n=!O(t=tn(this,t,e,0))||t!==this._$AH&&t!==J)&&(this._$AH=t);else{let r,o;let a=t;for(t=s[0],r=0;r<s.length-1;r++)(o=tn(this,a[i+r],e,r))===J&&(o=this._$AH[r]),n||=!O(o)||o!==this._$AH[r],o===Z?t=Z:t!==Z&&(t+=(o??"")+s[r+1]),this._$AH[r]=o}n&&!r&&this.j(t)}j(t){t===Z?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class tl extends th{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===Z?void 0:t}}class tu extends th{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==Z)}}class td extends th{constructor(t,e,i,r,s){super(t,e,i,r,s),this.type=5}_$AI(t,e=this){if((t=tn(this,t,e,0)??Z)===J)return;let i=this._$AH,r=t===Z&&i!==Z||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,s=t!==Z&&(i===Z||r);r&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class tc{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){tn(this,t)}}const tf=P.litHtmlPolyfillSupport;tf?.(ts,ta),(P.litHtmlVersions??=[]).push("3.1.4");const tg=(t,e,i)=>{let r=i?.renderBefore??e,s=r._$litPart$;if(void 0===s){let t=i?.renderBefore??null;r._$litPart$=s=new ta(e.insertBefore(N(),t),t,void 0,i??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class tp extends U{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){let e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=tg(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return J}}tp._$litElement$=!0,tp.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:tp});const tv=globalThis.litElementPolyfillSupport;tv?.({LitElement:tp}),(globalThis.litElementVersions??=[]).push("4.0.6");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tm={attribute:!0,type:String,converter:S,reflect:!1,hasChanged:w},tE=(t=tm,e,i)=>{let{kind:r,metadata:s}=i,n=globalThis.litPropertyMetadata.get(s);if(void 0===n&&globalThis.litPropertyMetadata.set(s,n=new Map),n.set(i.name,t),"accessor"===r){let{name:r}=i;return{set(i){let s=e.get.call(this);e.set.call(this,i),this.requestUpdate(r,s,t)},init(e){return void 0!==e&&this.P(r,void 0,t),e}}}if("setter"===r){let{name:r}=i;return function(i){let s=this[r];e.call(this,i),this.requestUpdate(r,s,t)}}throw Error("Unsupported decorator location: "+r)},t_=(t,e,i)=>(i.configurable=!0,i.enumerable=!0,Reflect.decorate&&"object"!=typeof e&&Object.defineProperty(t,e,i),i);var ty={},tT={};"undefined"!=typeof window?r=window:void 0!==s?r=s:"undefined"!=typeof self?r=self:r={},tT=r;var tA={};tA=function(t){if(!t)return!1;var e=tb.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var tb=Object.prototype.toString,tR={},tx=function(t){return t.replace(/^\s+|\s+$/g,"")};tR=function(t){if(!t)return{};for(var e={},i=tx(t).split("\n"),r=0;r<i.length;r++){var s,n=i[r],o=n.indexOf(":"),a=tx(n.slice(0,o)).toLowerCase(),h=tx(n.slice(o+1));void 0===e[a]?e[a]=h:(s=e[a],"[object Array]"===Object.prototype.toString.call(s))?e[a].push(h):e[a]=[e[a],h]}return e};var tS={};tS=function(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var r in i)tw.call(i,r)&&(t[r]=i[r])}return t};var tw=Object.prototype.hasOwnProperty;function t$(t,e,i){var r=t;return tA(e)?(i=e,"string"==typeof t&&(r={uri:t})):r=tS(e,{uri:t}),r.callback=i,r}function tU(t,e,i){return tP(e=t$(t,e,i))}function tP(t){if(void 0===t.callback)throw Error("callback argument missing");var e,i,r,s=!1,n=function(e,i,r){s||(s=!0,t.callback(e,i,r))};function o(t){return clearTimeout(r),t instanceof Error||(t=Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,n(t,p)}function a(){if(!i){clearTimeout(r);var e,s=p,o=null;return 0!==(e=t.useXDR&&void 0===h.status?200:1223===h.status?204:h.status)?(s={body:function(){var t=void 0;if(t=h.response?h.response:h.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!e)return t.responseXML}catch(t){}return null}(h),g)try{t=JSON.parse(t)}catch(t){}return t}(),statusCode:e,method:u,headers:{},url:l,rawRequest:h},h.getAllResponseHeaders&&(s.headers=tR(h.getAllResponseHeaders()))):o=Error("Internal XMLHttpRequest Error"),n(o,s,s.body)}}var h=t.xhr||null;h||(h=t.cors||t.useXDR?new tU.XDomainRequest:new tU.XMLHttpRequest);var l=h.url=t.uri||t.url,u=h.method=t.method||"GET",d=t.body||t.data,c=h.headers=t.headers||{},f=!!t.sync,g=!1,p={body:void 0,headers:{},statusCode:0,method:u,url:l,rawRequest:h};if("json"in t&&!1!==t.json&&(g=!0,c.accept||c.Accept||(c.Accept="application/json"),"GET"!==u&&"HEAD"!==u&&(c["content-type"]||c["Content-Type"]||(c["Content-Type"]="application/json"),d=JSON.stringify(!0===t.json?d:t.json))),h.onreadystatechange=function(){4===h.readyState&&setTimeout(a,0)},h.onload=a,h.onerror=o,h.onprogress=function(){},h.onabort=function(){i=!0},h.ontimeout=o,h.open(u,l,!f,t.username,t.password),f||(h.withCredentials=!!t.withCredentials),!f&&t.timeout>0&&(r=setTimeout(function(){if(!i){i=!0,h.abort("timeout");var t=Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",o(t)}},t.timeout)),h.setRequestHeader)for(e in c)c.hasOwnProperty(e)&&h.setRequestHeader(e,c[e]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(h.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(h),h.send(d||null),h}(ty=tU).default=tU,tU.XMLHttpRequest=tT.XMLHttpRequest||function(){},tU.XDomainRequest="withCredentials"in new tU.XMLHttpRequest?tU.XMLHttpRequest:tT.XDomainRequest,function(t,e){for(var i=0;i<t.length;i++)e(t[i])}(["get","put","post","patch","head","delete"],function(t){tU["delete"===t?"del":t]=function(e,i,r){return(i=t$(e,i,r)).method=t.toUpperCase(),tP(i)}});var tC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(t){this.value=t}function e(e){var i,r;function s(i,r){try{var o=e[i](r),a=o.value;a instanceof t?Promise.resolve(a.value).then(function(t){s("next",t)},function(t){s("throw",t)}):n(o.done?"return":"normal",o.value)}catch(t){n("throw",t)}}function n(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}(i=i.next)?s(i.key,i.arg):r=null}this._invoke=function(t,e){return new Promise(function(n,o){var a={key:t,arg:e,resolve:n,reject:o,next:null};r?r=r.next=a:(i=r=a,s(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}();var tL=function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")},tM=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),tD=function(t){if(!Array.isArray(t))return Array.from(t);for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i},tX="";function tF(t,e,i,r){var s=t.gl,n=s.createShader(i);return(s.shaderSource(n,e),s.compileShader(n),s.getShaderParameter(n,s.COMPILE_STATUS))?n:(tX=s.getShaderInfoLog(n),console.error("*** Error compiling shader "+n+":"+tX),t.trigger("error",{shader:n,source:e,type:i,error:tX,offset:r||0}),s.deleteShader(n),null)}function tI(t,e,i,r){for(var s=t.gl,n=s.createProgram(),o=0;o<e.length;++o)s.attachShader(n,e[o]);if(i)for(var a=0;a<i.length;++a)s.bindAttribLocation(n,r?r[a]:a,i[a]);return(s.linkProgram(n),s.getProgramParameter(n,s.LINK_STATUS))?n:(console.log("Error in program linking:"+(tX=s.getProgramInfoLog(n))),s.deleteProgram(n),null)}function tN(t){var e=new Set;return Object.assign(t,{on:function(t,i){var r={};r[t]=i,e.add(r)},off:function(t,i){if(i){var r={};r[t]=i,e.delete(r)}else{var s=!0,n=!1,o=void 0;try{for(var a,h=e[Symbol.iterator]();!(s=(a=h.next()).done);s=!0){var l=a.value,u=!0,d=!1,c=void 0;try{for(var f,g=Object.keys(l)[Symbol.iterator]();!(u=(f=g.next()).done);u=!0)if(f.value===t){e.delete(l);return}}catch(t){d=!0,c=t}finally{try{!u&&g.return&&g.return()}finally{if(d)throw c}}}}catch(t){n=!0,o=t}finally{try{!s&&h.return&&h.return()}finally{if(n)throw o}}}},listSubscriptions:function(){var t=!0,i=!1,r=void 0;try{for(var s,n=e[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var o=s.value;console.log(o)}}catch(t){i=!0,r=t}finally{try{!t&&n.return&&n.return()}finally{if(i)throw r}}},subscribe:function(t){e.add(t)},unsubscribe:function(t){e.delete(t)},unsubscribeAll:function(){e.clear()},trigger:function(t){for(var i=arguments.length,r=Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];var n=!0,o=!1,a=void 0;try{for(var h,l=e[Symbol.iterator]();!(n=(h=l.next()).done);n=!0){var u=h.value;"function"==typeof u[t]&&u[t].apply(u,tD(r))}}catch(t){o=!0,a=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw a}}}})}var tO=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};tL(this,t),tN(this),this.gl=e,this.texture=e.createTexture(),this.texture&&(this.valid=!0),this.bind(),this.name=i,this.source=null,this.sourceType=null,this.loading=null,this.setData(1,1,new Uint8Array([0,0,0,255]),{filtering:"linear"}),this.setFiltering(r.filtering),this.load(r)}return tM(t,[{key:"destroy",value:function(){this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,this.valid=!1)}},{key:"bind",value:function(e){this.valid&&("number"==typeof e&&t.activeUnit!==e&&(this.gl.activeTexture(this.gl.TEXTURE0+e),t.activeUnit=e),t.activeTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),t.activeTexture=this.texture))}},{key:"load",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=null,"string"==typeof t.url?(void 0===this.url||t.url!==this.url)&&this.setUrl(t.url,t):t.element?this.setElement(t.element,t):t.data&&t.width&&t.height&&this.setData(t.width,t.height,t.data,t)}},{key:"setUrl",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.valid)return this.url=t,this.source=this.url,this.sourceType="url",this.loading=new Promise(function(r,s){var n=t.split(".").pop().toLowerCase(),o="ogv"===n||"webm"===n||"mp4"===n,a=void 0;o?((a=document.createElement("video")).autoplay=!0,a.muted=!0,setTimeout(function(){a.play()},1),i.filtering="nearest"):a=new Image,a.onload=function(){try{e.setElement(a,i)}catch(t){console.log("Texture '"+e.name+"': failed to load url: '"+e.source+"'",t,i)}r(e)},a.onerror=function(t){console.log("Texture '"+e.name+"': failed to load url: '"+e.source+"'",t,i),r(e)},/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&"data:"===e.source.slice(0,5)||(a.crossOrigin="anonymous"),a.src=e.source,o&&e.setElement(a,i)}),this.loading}},{key:"setData",value:function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.width=t,this.height=e,this.source=i,this.sourceType="data",this.update(r),this.setFiltering(r),this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(t,e){var i=this,r=t;if("string"==typeof t&&(t=document.querySelector(t)),t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof HTMLVideoElement)this.source=t,this.sourceType="element",t instanceof HTMLVideoElement?(this.width=this.source.videoWidth,this.height=this.source.videoHeight,t.addEventListener("canplaythrough",function(){i.intervalID=setInterval(function(){i.update(e)},15)},!0),t.addEventListener("ended",function(){t.currentTime=0,t.play()},!0)):this.update(e),this.setFiltering(e);else{var s="the 'element' parameter (`element: "+JSON.stringify(r)+"`) must be a CSS ";s+="selector string, or a <canvas>, <image> or <video> object",console.log("Texture '"+this.name+"': "+s,e)}return this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.valid&&(this.bind(),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1!==t.UNPACK_FLIP_Y_WEBGL),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),"element"===this.sourceType&&(this.source instanceof HTMLCanvasElement||this.source instanceof HTMLVideoElement||this.source instanceof HTMLImageElement&&this.source.complete)?(this.source instanceof HTMLVideoElement?(this.width=this.source.videoWidth,this.height=this.source.videoHeight):(this.width=this.source.width,this.height=this.source.height),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.source)):"data"===this.sourceType&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.source),this.trigger("loaded",this))}},{key:"setFiltering",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.valid){this.powerOf2=((e=this.width)&e-1)==0&&((i=this.height)&i-1)==0,this.filtering=t.filtering||"linear";var e,i,r=this.gl;this.bind(),this.powerOf2?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t.TEXTURE_WRAP_S||r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t.TEXTURE_WRAP_T||r.REPEAT),"mipmap"===this.filtering?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.generateMipmap(r.TEXTURE_2D)):"linear"===this.filtering?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):"nearest"===this.filtering&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST))):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),"mipmap"===this.filtering&&(this.filtering="linear"),"nearest"===this.filtering?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)))}}}]),t}();tO.getMaxTextureSize=function(t){return t.getParameter(t.MAX_TEXTURE_SIZE)},tO.activeUnit=-1;var tH=function(){function t(i,r,s){var n=this;tL(this,t),tN(this),r=r||{},s=s||{},i.hasAttribute("data-fullscreen")&&("1"==i.getAttribute("data-fullscreen")||"true"==i.getAttribute("data-fullscreen"))?(this.width=window.innerWidth,this.height=window.innerHeight,i.width=window.innerWidth,i.height=window.innerHeight):(this.width=i.clientWidth,this.height=i.clientHeight),this.canvas=i,this.gl=void 0,this.deps={},this.program=void 0,this.textures={},this.buffers={},this.uniforms={},this.vbo={},this.isValid=!1,this.animationFrameRequest=void 0,this.BUFFER_COUNT=0,this.vertexString=r.vertexString||"\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nattribute vec2 a_position;\nattribute vec2 a_texcoord;\n\nvarying vec2 v_texcoord;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n    v_texcoord = a_texcoord;\n}\n",this.fragmentString=r.fragmentString||"\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying vec2 v_texcoord;\n\nvoid main(){\n    gl_FragColor = vec4(0.0);\n}\n";var o=function(t,e,i){function r(e,r){var s;"function"==typeof i?i(e):(s=t.parentNode)&&(s.innerHTML='\n<table style="background-color: #8CE; width: 100%; height: 100%;"><tr>\n<td align="center">\n<div style="display: table-cell; vertical-align: middle;">\n<div style="">'+r+"</div>\n</div>\n</td></tr></table>\n")}if(!window.WebGLRenderingContext)return r(1,'\n	This page requires a browser that supports WebGL.<br/>\n	<a href="http://get.webgl.org">Click here to upgrade your browser.</a>\n'),null;var s=function(t,e){for(var i=["webgl","experimental-webgl"],r=null,s=0;s<i.length;++s)try{r=t.getContext(i[s],e)}catch(t){if(r)break}return r}(t,e);return s?s.getExtension("OES_standard_derivatives"):r(2,'\n	It does not appear your computer can support WebGL.<br/>\n	<a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>\n'),s}(i,r,s.onError);if(o){if(this.gl=o,this.timeLoad=this.timePrev=performance.now(),this.timeDelta=0,this.forceRender=!0,this.paused=!1,this.realToCSSPixels=window.devicePixelRatio||1,i.style.backgroundColor=r.backgroundColor||"rgba(1,1,1,0)",i.hasAttribute("data-fragment"))this.fragmentString=i.getAttribute("data-fragment");else if(i.hasAttribute("data-fragment-url")){var a=i.getAttribute("data-fragment-url");e(ty).get(a,function(t,e,i){n.load(i,n.vertexString)})}if(i.hasAttribute("data-vertex"))this.vertexString=i.getAttribute("data-vertex");else if(i.hasAttribute("data-vertex-url")){var h=i.getAttribute("data-vertex-url");e(ty).get(h,function(t,e,i){n.load(n.fragmentString,i)})}if(this.load(),this.program){var l=o.getAttribLocation(this.program,"a_texcoord");this.vbo.texCoords=o.createBuffer(),this.gl.bindBuffer(o.ARRAY_BUFFER,this.vbo.texCoords),this.gl.bufferData(o.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),o.STATIC_DRAW),this.gl.enableVertexAttribArray(l),this.gl.vertexAttribPointer(l,2,o.FLOAT,!1,0,0);var u=o.getAttribLocation(this.program,"a_position");if(this.vbo.vertices=o.createBuffer(),this.gl.bindBuffer(o.ARRAY_BUFFER,this.vbo.vertices),this.gl.bufferData(o.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),o.STATIC_DRAW),this.gl.enableVertexAttribArray(u),this.gl.vertexAttribPointer(u,2,o.FLOAT,!1,0,0),i.hasAttribute("data-textures")){var d=i.getAttribute("data-textures").split(",");for(var c in d)this.setUniform("u_tex"+c,d[c])}var f={x:0,y:0};document.addEventListener("mousemove",function(t){f.x=t.clientX||t.pageX,f.y=t.clientY||t.pageY},!1);var g=this;return this.setMouse({x:0,y:0}),function t(){g.nMouse>1&&g.setMouse(f),g.resize()&&(g.forceRender=!0),g.render(),g.animationFrameRequest=window.requestAnimationFrame(t)}(),this}}}return tM(t,[{key:"destroy",value:function(){for(var t in cancelAnimationFrame(this.animationFrameRequest),this.animated=!1,this.isValid=!1,this.textures)t.destroy&&t.destroy();for(var e in this.textures={},this.attribs)this.gl.deleteBuffer(this.attribs[e]);for(var i in this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.buffers){var r=this.buffers[i];this.gl.deleteProgram(r.program)}this.program=null,this.gl=null}},{key:"load",value:function(t,e){var i=this;e&&(this.vertexString=e),t&&(this.fragmentString=t);var r=this.fragmentString.split(/\r?\n/);if(this.fragmentString="#define PLATFORM_WEBGL\n#line 0\n",r.forEach(function(t,e){var r=t.trim();if(r.startsWith('#include "lygia')){var s=r.substring(15).replace(/\'|\"|\;|\s/g,"");if(s.endsWith("glsl")){if(void 0===i.deps[s]){var n,o="https://lygia.xyz"+s;(n=new XMLHttpRequest).open("GET",o,!1),n.send(),i.deps[s]=200==n.status?n.responseText:""}i.fragmentString+=i.deps[s]+"\n#line "+(e+1)+"\n"}}else i.fragmentString+=t+"\n"}),this.animated=!1,this.nDelta=(this.fragmentString.match(/u_delta/g)||[]).length,this.nTime=(this.fragmentString.match(/u_time/g)||[]).length,this.nDate=(this.fragmentString.match(/u_date/g)||[]).length,this.nMouse=(this.fragmentString.match(/u_mouse/g)||[]).length,this.animated=this.nDate>1||this.nTime>1||this.nMouse>1,this.fragmentString.search(/sampler2D/g))for(var s=this.fragmentString.split("\n"),n=0;n<s.length;n++){var o=s[n].match(/uniform\s*sampler2D\s*([\w]*);\s*\/\/\s*([\w|\:\/\/|\.|\-|\_]*)/i);if(o){var a=o[2].split(".").pop().toLowerCase();o[1]&&o[2]&&("jpg"===a||"jpeg"===a||"png"===a||"ogv"===a||"webm"===a||"mp4"===a)&&this.setUniform(o[1],o[2])}if(s[n].match(/\s*void\s*main\s*/g))break}var h=tF(this,this.vertexString,this.gl.VERTEX_SHADER),l=tF(this,this.fragmentString,this.gl.FRAGMENT_SHADER);l?this.isValid=!0:(l=tF(this,"void main(){\n	gl_FragColor = vec4(1.0);\n}",this.gl.FRAGMENT_SHADER),this.isValid=!1);var u=tI(this,[h,l]);this.gl.useProgram(u),this.gl.deleteShader(h),this.gl.deleteShader(l),this.program=u,this.change=!0,this.BUFFER_COUNT=0;var d=this.getBuffers(this.fragmentString);Object.keys(d).length&&this.loadPrograms(d),this.buffers=d,this.texureIndex=this.BUFFER_COUNT,this.trigger("load",{}),this.forceRender=!0,this.render()}},{key:"test",value:function(t,e,i){var r=this.vertexString,s=this.fragmentString,n=this.paused,o=this.gl.getExtension("EXT_disjoint_timer_query"),a=o.createQueryEXT(),h=this.isValid;(e||i)&&(this.load(e,i),h=this.isValid,this.forceRender=!0,this.render()),this.paused=!0,o.beginQueryEXT(o.TIME_ELAPSED_EXT,a),this.forceRender=!0,this.render(),o.endQueryEXT(o.TIME_ELAPSED_EXT);var l=this;!function u(){l.forceRender=!0,l.render();var d=o.getQueryObjectEXT(a,o.QUERY_RESULT_AVAILABLE_EXT),c=l.gl.getParameter(o.GPU_DISJOINT_EXT);if(d&&!c){var f={wasValid:h,frag:e||l.fragmentString,vert:i||l.vertexString,timeElapsedMs:o.getQueryObjectEXT(a,o.QUERY_RESULT_EXT)/1e6};l.paused=n,(e||i)&&l.load(s,r),t(f)}else window.requestAnimationFrame(u)}()}},{key:"loadTexture",value:function(t,e,i){var r=this;i||(i={}),"string"==typeof e?i.url=e:(void 0===e?"undefined":tC(e))==="object"&&e.data&&e.width&&e.height?(i.data=e.data,i.width=e.width,i.height=e.height):(void 0===e?"undefined":tC(e))==="object"&&(i.element=e),this.textures[t]?this.textures[t]&&(this.textures[t].load(i),this.textures[t].on("loaded",function(t){r.forceRender=!0})):(this.textures[t]=new tO(this.gl,t,i),this.textures[t].on("loaded",function(t){r.forceRender=!0}))}},{key:"refreshUniforms",value:function(){this.uniforms={}}},{key:"setUniform",value:function(t){for(var e={},i=arguments.length,r=Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];e[t]=r,this.setUniforms(e)}},{key:"setUniforms",value:function(t){var e=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[];for(var s in e){var n=e[s],o=void 0;if(i&&(s=i+"."+s),"number"==typeof n)r.push({type:"float",method:"1f",name:s,value:n});else if(Array.isArray(n)){if("number"==typeof n[0])1===n.length?r.push({type:"float",method:"1f",name:s,value:n}):n.length>=2&&n.length<=4?r.push({type:"vec"+n.length,method:n.length+"fv",name:s,value:n}):n.length>4&&r.push({type:"float[]",method:"1fv",name:s+"[0]",value:n});else if("string"==typeof n[0])r.push({type:"sampler2D",method:"1i",name:s,value:n});else if(Array.isArray(n[0])&&"number"==typeof n[0][0]){if(n[0].length>=2&&n[0].length<=4)for(o=0;o<n.length;o++)r.push({type:"vec"+n[0].length,method:n[o].length+"fv",name:s+"["+o+"]",value:n[o]})}else if("object"===tC(n[0]))for(o=0;o<n.length;o++)r.push.apply(r,tD(t(n[o],s+"["+o+"]")))}else"boolean"==typeof n?r.push({type:"bool",method:"1i",name:s,value:n}):"string"==typeof n?r.push({type:"sampler2D",method:"1i",name:s,value:n}):(void 0===n?"undefined":tC(n))==="object"&&r.push.apply(r,tD(t(n,s)))}return r}(t);for(var i in e)"sampler2D"===e[i].type?this.loadTexture(e[i].name,e[i].value[0]):this.uniform(e[i].method,e[i].type,e[i].name,e[i].value);this.forceRender=!0}},{key:"setMouse",value:function(t){var e=this.canvas.getBoundingClientRect();if(t&&t.x&&t.x>=e.left&&t.x<=e.right&&t.y&&t.y>=e.top&&t.y<=e.bottom){var i=(t.x-e.left)*this.realToCSSPixels,r=this.canvas.height-(t.y-e.top)*this.realToCSSPixels;this.uniform("2f","vec2","u_mouse",i,r)}}},{key:"uniform",value:function(t,e,i){this.uniforms[i]=this.uniforms[i]||{};for(var r,s=this.uniforms[i],n=arguments.length,o=Array(n>3?n-3:0),a=3;a<n;a++)o[a-3]=arguments[a];if((r=s.value)&&o&&r.toString()!==o.toString()||this.change||!s.location||!s.value)for(var h in s.name=i,s.type=e,s.value=o,s.method="uniform"+t,this.gl.useProgram(this.program),s.location=this.gl.getUniformLocation(this.program,i),this.gl[s.method].apply(this.gl,[s.location].concat(s.value)),this.buffers){var l=this.buffers[h];this.gl.useProgram(l.program);var u=this.gl.getUniformLocation(l.program,i);this.gl[s.method].apply(this.gl,[u].concat(s.value))}}},{key:"uniformTexture",value:function(t,e,i){if(void 0===this.textures[t])this.loadTexture(t,e,i);else{for(var r in this.uniform("1i","sampler2D",t,this.texureIndex),this.buffers){var s=this.buffers[r];this.gl.useProgram(s.program),this.gl.activeTexture(this.gl.TEXTURE0+this.texureIndex),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[t].texture)}this.gl.useProgram(this.program),this.gl.activeTexture(this.gl.TEXTURE0+this.texureIndex),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[t].texture),this.uniform("2f","vec2",t+"Resolution",this.textures[t].width,this.textures[t].height)}}},{key:"resize",value:function(){if(this.width===this.canvas.clientWidth&&this.height===this.canvas.clientHeight)return!1;this.realToCSSPixels=window.devicePixelRatio||1;var t=Math.floor(this.gl.canvas.clientWidth*this.realToCSSPixels),e=Math.floor(this.gl.canvas.clientHeight*this.realToCSSPixels);return(this.gl.canvas.width!==t||this.gl.canvas.height!==e)&&(this.gl.canvas.width=t,this.gl.canvas.height=e,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)),this.width=this.canvas.clientWidth,this.height=this.canvas.clientHeight,this.resizeSwappableBuffers(),!0}},{key:"render",value:function(){var t;if(this.visible=(t=this.canvas.getBoundingClientRect()).top+t.height>0&&t.top<(window.innerHeight||document.documentElement.clientHeight),this.forceRender||this.change||this.animated&&this.visible&&!this.paused){var e=new Date,i=performance.now();for(var r in this.timeDelta=(i-this.timePrev)/1e3,this.timePrev=i,this.nDelta>1&&this.uniform("1f","float","u_delta",this.timeDelta),this.nTime>1&&this.uniform("1f","float","u_time",(i-this.timeLoad)/1e3),this.nDate&&this.uniform("4f","float","u_date",e.getFullYear(),e.getMonth(),e.getDate(),3600*e.getHours()+60*e.getMinutes()+e.getSeconds()+.001*e.getMilliseconds()),this.uniform("2f","vec2","u_resolution",this.canvas.width,this.canvas.height),this.buffers){var s=this.buffers[r];this.uniform("1i","sampler2D",s.name,s.bundle.input.index)}for(var n in this.texureIndex=this.BUFFER_COUNT,this.textures)this.uniformTexture(n),this.texureIndex++;this.renderPrograms(),this.trigger("render",{}),this.change=!1,this.forceRender=!1}}},{key:"pause",value:function(){this.paused=!0}},{key:"play",value:function(){this.paused=!1}},{key:"renderPrograms",value:function(){var t=this.gl,e=t.canvas.width,i=t.canvas.height;for(var r in t.viewport(0,0,e,i),this.buffers){var s=this.buffers[r];s.bundle.render(e,i,s.program,s.name),t.bindFramebuffer(t.FRAMEBUFFER,null)}t.useProgram(this.program),t.drawArrays(t.TRIANGLES,0,6)}},{key:"getBuffers",value:function(t){var e={};return t&&t.replace(/(?:^\s*)((?:#if|#elif)(?:\s*)(defined\s*\(\s*BUFFER_)(\d+)(?:\s*\))|(?:#ifdef)(?:\s*BUFFER_)(\d+)(?:\s*))/gm,function(){var i=arguments[3]||arguments[4];e["u_buffer"+i]={fragment:"#define BUFFER_"+i+"\n"+t}}),e}},{key:"loadPrograms",value:function(t){var e=this.gl,i=tF(this,this.vertexString,e.VERTEX_SHADER);for(var r in t){var s=t[r],n=tF(this,s.fragment,e.FRAGMENT_SHADER,1);n?this.isValid=!0:(n=tF(this,"void main(){\n	gl_FragColor = vec4(1.0);\n}",e.FRAGMENT_SHADER),this.isValid=!1);var o=tI(this,[i,n]);s.name=r,s.program=o,s.bundle=this.createSwappableBuffer(this.canvas.width,this.canvas.height,o),e.deleteShader(n)}e.deleteShader(i)}},{key:"createSwappableBuffer",value:function(t,e,i){var r=this.createBuffer(t,e,i),s=this.createBuffer(t,e,i),n=this.gl;return{input:r,output:s,swap:function(){var t=r;r=s,s=t,this.input=r,this.output=s},render:function(t,e,i,r){n.useProgram(i),n.viewport(0,0,t,e),n.bindFramebuffer(n.FRAMEBUFFER,this.input.buffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.output.texture,0),n.drawArrays(n.TRIANGLES,0,6),this.swap()},resize:function(t,e,i,r){n.useProgram(i),n.viewport(0,0,t,e),this.input.resize(t,e),this.output.resize(t,e)}}}},{key:"createBuffer",value:function(t,e,i){var r=this.gl,s=this.BUFFER_COUNT;this.BUFFER_COUNT+=2,r.getExtension("OES_texture_float");var n=r.createTexture();r.activeTexture(r.TEXTURE0+s),r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t,e,0,r.RGBA,r.FLOAT,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE);var o=r.createFramebuffer();return{index:s,texture:n,buffer:o,W:t,H:e,resize:function(t,e){r.bindFramebuffer(r.FRAMEBUFFER,o);var i=Math.min(t,this.W),a=Math.min(e,this.H),h=new Float32Array(i*a*4);r.readPixels(0,0,i,a,r.RGBA,r.FLOAT,h),r.bindFramebuffer(r.FRAMEBUFFER,null);var l=s+1,u=r.createTexture();r.activeTexture(r.TEXTURE0+l),r.bindTexture(r.TEXTURE_2D,u),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t,e,0,r.RGBA,r.FLOAT,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,i,a,r.RGBA,r.FLOAT,h);var d=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(n),r.activeTexture(r.TEXTURE0+s),r.bindTexture(r.TEXTURE_2D,u),s=this.index=s,n=this.texture=u,o=this.buffer=d,this.W=t,this.H=e}}}},{key:"resizeSwappableBuffers",value:function(){var t=this.gl,e=t.canvas.width,i=t.canvas.height;for(var r in t.viewport(0,0,e,i),this.buffers){var s=this.buffers[r];s.bundle.resize(e,i,s.program,s.name)}t.useProgram(this.program)}},{key:"version",value:function(){return"0.1.7"}}]),t}();window.addEventListener("load",function(){!function(){var t=document.getElementsByClassName("glslCanvas");if(t.length>0){window.glslCanvases=[];for(var e=0;e<t.length;e++){var i=new tH(t[e]);i.isValid&&window.glslCanvases.push(i)}}}()});const tk=`/// hello world!

#ifdef GL_ES
precision mediump float;
#endif

uniform float u_time;

void main(){
  gl_FragColor = vec4(cos(u_time), 0.5, 0.3, 1.0);
}
`;class tB extends tp{static{this.styles=c`
    :host {
      color: blue;
    }

    #code-editor {
      color: black;
      display: block;
      width: 100%;
      min-height: 3em;
      background-color: #fafafa;
      border: 1px solid #efefef;
      border-radius: 8px;
      padding: 8px;
    }

    #shader-canvas {
      width: 360px;
      height: 240px;
      background-color: #0a0a0a;
      border: 1px solid #efefef;
    }
  `}constructor(){super(),this._setUpGlslCanvas()}async _setUpGlslCanvas(){this._glslSandbox=new tH(await this._shaderCanvas),this._glslSandbox.load(tk)}render(){return Q`
      <canvas id="shader-canvas"></canvas>
      <pre
        id="code-editor"
        contenteditable="true"
        @input=${this._updateCode}
        .innerText=${tk}
      ></pre>
    `}get code(){return this._codeEditor.innerText}_updateCode(t){console.log(this.code),this._glslSandbox.load(this.code)}}n([(t,e,i)=>{let r=t=>t.renderRoot?.querySelector("#code-editor")??null;return t_(t,e,{get(){return r(this)}})}],tB.prototype,"_codeEditor",void 0),n([(t,e)=>t_(t,e,{async get(){return await this.updateComplete,this.renderRoot?.querySelector("#shader-canvas")??null}})],tB.prototype,"_shaderCanvas",void 0),n([(i={state:!0,attribute:!1},(t,e)=>"object"==typeof e?tE(i,t,e):((t,e,i)=>{let r=e.hasOwnProperty(i);return e.constructor.createProperty(i,r?{...t,wrapped:!0}:t),r?Object.getOwnPropertyDescriptor(e,i):void 0})(i,t,e))],tB.prototype,"_glslSandbox",void 0),n([(t="shader-editor",(e,i)=>{void 0!==i?i.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)})],tB);
//# sourceMappingURL=index.ff3c4c8d.js.map
